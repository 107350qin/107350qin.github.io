(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{334:function(t,s,r){"use strict";r.r(s);var a=r(17),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"使用vuepress-github搭建静态网站"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用vuepress-github搭建静态网站"}},[t._v("#")]),t._v(" 使用vuepress+github搭建静态网站")]),t._v(" "),s("h2",{attrs:{id:"vuepress项目开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuepress项目开发"}},[t._v("#")]),t._v(" vuepress项目开发")]),t._v(" "),s("p",[t._v("这里参照"),s("a",{attrs:{href:"http://caibaojian.com/vuepress/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),s("OutboundLink")],1),t._v("一步步做就行，我这里关键记录一下部署过程。")]),t._v(" "),s("h2",{attrs:{id:"项目部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目部署"}},[t._v("#")]),t._v(" 项目部署")]),t._v(" "),s("h3",{attrs:{id:"仓库名称"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#仓库名称"}},[t._v("#")]),t._v(" 仓库名称")]),t._v(" "),s("p",[t._v("由于我们要使用GitHub的免费域名来部署网站，所以仓库名称就起成 "),s("code",[t._v("username.github.io")]),t._v("，这里的username是你的github的账号名。")]),t._v(" "),s("h3",{attrs:{id:"分支"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分支"}},[t._v("#")]),t._v(" 分支")]),t._v(" "),s("p",[t._v("我们提交的源代码是"),s("strong",[t._v("master")]),t._v("分支，"),s("strong",[t._v("npm")]),t._v("编译之后的资源文件我们希望通过脚本push到另外一个分支，所以还要建一个分支，这里就叫做 "),s("strong",[t._v("gh-pages")]),t._v(" 吧！")]),t._v(" "),s("h3",{attrs:{id:"配置编译-推送脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置编译-推送脚本"}},[t._v("#")]),t._v(" 配置编译&推送脚本")]),t._v(" "),s("p",[t._v("在仓库下新建文件 "),s("code",[t._v(".github/workflows/gh-pages.yml")]),t._v("，内容如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Deploy to GitHub Pages\n\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" master\n\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deploy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    runs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("on"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" uses"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" actions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("checkout@v2\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Setup Node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" actions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node@v2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.0")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n          node"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'14.x'")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Install dependencies\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" npm ci\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Build site\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" npm run docs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("build\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Deploy to GitHub Pages\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" JamesIves"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("github"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("deploy"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("action@"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.1")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUEPRESS_SECRET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("branch")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" gh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("pages\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("folder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" docs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vuepress"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dist"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n")])])]),s("p",[t._v("表示当master分支有更新时，自动编译之后推送到gh-pages分支。其中重要的参数如下：")]),t._v(" "),s("ul",[s("li",[t._v("这里推送目录写编译之后的dist目录哈")]),t._v(" "),s("li",[t._v("token怎么获取？\n"),s("ul",[s("li",[t._v("github>setting>Developer settings>Personal access tokens>Tokens(classis)新建一个token，我这里就写一个叫做VUEPRESS_TOKEN，生成的token字符串自己保存一下哈，下一步要用。")]),t._v(" "),s("li",[t._v("仓库>Settings>Security>Secrets and variables>Actions>New repository secrets，我这里就写一个叫做VUEPRESS_SECRETS，对应的值写上面获得的token字符串。")]),t._v(" "),s("li",[t._v("于是乎，脚本文件中的token就可以写上"),s("code",[t._v("secrets.VUEPRESS_SECRET")])])])])]),t._v(" "),s("h3",{attrs:{id:"部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),s("p",[t._v("当主分支内容改变之后，查看部署分支gh-pages内容是否更新了，更新之后访问"),s("code",[t._v("username.github.io")]),t._v("即可！")]),t._v(" "),s("h3",{attrs:{id:"其他问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他问题"}},[t._v("#")]),t._v(" 其他问题")]),t._v(" "),s("ul",[s("li",[t._v("部署之后如果发现页面错乱，可能是config.js里配置的base不正确，把它去掉试试。")]),t._v(" "),s("li",[t._v("当部署失败时，尝试使用仓库下的 Actions 进行手动部署，这样可以看到日志，以便排查错误\n"),s("ul",[s("li",[t._v("如果看到deploy阶段Permisson之类的问题，可能是你的TOKEN配置的权限不够！")]),t._v(" "),s("li",[t._v("md文档编辑是不要用大括号，否则可能会编译失败。")])])])]),t._v(" "),s("Vssue",{attrs:{title:t.$title}})],1)}),[],!1,null,null,null);s.default=e.exports}}]);